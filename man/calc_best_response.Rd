% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_best_response.R
\name{calc_best_response}
\alias{calc_best_response}
\title{Calculate Best RECIST Response}
\usage{
calc_best_response(
  data_recist,
  ...,
  rc_sum = "RCTLSUM",
  rc_resp = "RCRESP",
  rc_date = "RCDT",
  subjid = "SUBJID",
  exclude_post_pd = TRUE,
  warnings = getOption("grstat_best_resp_warnings", TRUE),
  confirmed = FALSE
)
}
\arguments{
\item{data_recist}{A dataset containing longitudinal RECIST data in long format.}

\item{...}{Not used. Ensures that only named arguments are passed.}

\item{rc_sum}{The column containing the sum of target lesions. Default is \code{"RCTLSUM"}.}

\item{rc_resp}{The column containing the RECIST response (e.g., \code{"CR"}, \code{"PR"}, \code{"SD"}, \code{"PD"}). Default is \code{"RCRESP"}.}

\item{rc_date}{The column containing the assessment date. Default is \code{"RCDT"}.}

\item{subjid}{The column containing the subject ID. Default is \code{"SUBJID"}.}

\item{exclude_post_pd}{Logical; if \code{TRUE} (default), assessments after the first PD are excluded.}

\item{warnings}{Logical; if \code{TRUE} (default is taken from \code{getOption("grstat_best_resp_warnings", TRUE)}), emits warnings during internal checks.}
}
\value{
A tibble with one row per subject, containing:
\itemize{
\item \code{subjid}: Subject ID
\item \code{best_response}: The best RECIST response observed before progression
\item \code{date}: The date corresponding to the best response
\item \code{target_sum}: Sum of target lesions at that date
\item \code{target_sum_diff_first}: Relative difference in target sum compared to baseline
\item \code{target_sum_diff_min}: Relative difference in target sum compared to the minimum observed
}
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}\cr
Computes the best RECIST response per subject based on target lesion sum and response categories.
Ties are resolved using lesion sum, then by date.
}
\details{
The function identifies the best response using the following logic:
\enumerate{
\item Responses are ordered: \code{CR} > \code{PR} > \code{SD} > \code{PD} > \code{Missing}
\item Among the best responses, the one with the smallest target lesion sum is selected
\item If still tied, the earliest assessment date is selected
\item Only subjects with at least two assessments and non-missing target sum are considered
\item By default, all assessments after the first PD are excluded (\code{exclude_post_pd = TRUE})
}
}
\examples{
db = grstat_example()
db$recist \%>\%
  calc_best_response()
}
