% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ae_table_grade.R
\name{ae_table_grade}
\alias{ae_table_grade}
\title{Tabulate Adverse Events by Grade (max, ≥x, ==x)}
\usage{
ae_table_grade(
  data_ae,
  ...,
  data_pat,
  variant = c("max", "sup", "eq"),
  arm = NULL,
  grade = "AEGR",
  subjid = "SUBJID",
  ae_label = "AE",
  percent_pattern = "{n} ({p}\%)",
  percent_digits = 0,
  zero_value = "0",
  total = TRUE,
  na_strategy = list(display = "if_any", grouped = FALSE),
  df_ae,
  df_enrol,
  percent = TRUE,
  digits = 0
)
}
\arguments{
\item{data_ae}{Data frame of adverse events, with one row per AE.}

\item{...}{Unused.}

\item{data_pat}{Data frame of enrolled patients, with one row per patient.}

\item{variant}{Character vector specifying which variants to compute: \code{"max"}, \code{"sup"}, \code{"eq"}.}

\item{arm}{Name of the arm column in \code{data_pat}. If \code{NULL}, all patients are pooled.}

\item{grade}{Name of the AE grade column in \code{data_ae}.}

\item{subjid}{Name of the subject ID column (in both data frames).}

\item{ae_label}{Label used in the output tables (e.g. "AE", "Toxicity").}

\item{percent_pattern}{Pattern used to format counts and percentages. Use \code{{n}} and \code{{p}} as placeholders.}

\item{percent_digits}{Number of digits to show for percentages.}

\item{zero_value}{String to use when count is zero.}

\item{total}{Logical. If \code{TRUE}, adds a "Total" column across arms (only if multiple arms exist).}

\item{na_strategy}{A named list controlling how missing AEs or absent patients are
displayed in the output tables. Must contain \code{display} (one of \code{"if_any"}
or \code{"always"}) and \code{grouped} (logical).}

\item{df_ae, df_enrol}{Deprecated. Use \code{data_ae} and \code{data_pat} instead.}

\item{percent, digits}{Deprecated. Use \code{percent_pattern}and \code{percent_digits} instead.}
}
\value{
A data frame of class \code{ae_table_grade}, ready for use with \code{\link[=as_flextable]{as_flextable()}}.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#stable}{\figure{lifecycle-stable.svg}{options: alt='[Stable]'}}}{\strong{[Stable]}}\cr
This function creates summary tables of adverse events (AEs) by grade, for each treatment arm if provided.
By default, it shows three variants:
\itemize{
\item \code{"max"}: highest AE grade experienced by each patient
\item \code{"sup"}: at least one AE of grade ≥ \emph{x}
\item \code{"eq"}: at least one AE of grade == \emph{x}
}
}
\examples{
db = grstat_example(N=200, p_na=0.1)
ae_table_grade(db$ae, data_pat=db$enrolres, 
               total=FALSE, percent_digits=1) \%>\%
  as_flextable()

db = grstat_example(N=20, p_na=0)
ae_table_grade(db$ae, data_pat=db$enrolres, arm="ARM", 
               total=TRUE, zero_value="-",
               na_strategy=list(display="always", grouped=TRUE)) \%>\%
  as_flextable()

}
